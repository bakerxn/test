<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Quiz Player</title>
    <style>
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            border-radius: 15px;
            overflow: hidden;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .controls {
            margin: 20px 0;
            text-align: center;
        }
        
        .controls button {
            padding: 10px 20px;
            margin: 0 10px;
            font-size: 20px;
            cursor: pointer;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid #333;
            background: white;
            transition: all 0.2s ease;
        }
        
        .controls button:hover {
            background: #f0f0f0;
        }
        
        .quiz-container {
            margin-top: 20px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            display: none;
        }
        
        .quiz-container.active {
            display: block;
        }
        
        .option {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            text-align: left;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: none;
            cursor: pointer;
        }
        
        .option:hover {
            background-color: #f0f0f0;
        }
        
        .option.correct {
            background-color: #90EE90;
        }
        
        .option.incorrect {
            background-color: #FFB6C1;
        }

        /* Likert Scale Styles */
        .likert-container {
            margin: 20px 0;
        }

        .likert-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
            padding: 0 10px;
        }

        .likert-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: background-color 0.2s ease;
            min-width: 80px;
        }

        .likert-option:hover {
            background-color: #f0f0f0;
        }

        .likert-option.selected {
            background-color: #4CAF50;
            color: white;
        }

        .likert-radio {
            width: 20px;
            height: 20px;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .likert-label {
            font-size: 12px;
            text-align: center;
            font-weight: bold;
        }

        .likert-endpoints {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #666;
            margin-top: 10px;
            font-style: italic;
        }

        .likert-submit {
            display: block;
            margin: 20px auto;
            padding: 12px 24px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .likert-submit:hover {
            background-color: #45a049;
        }

        .likert-submit:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .timer {
            text-align: center;
            color: #666;
            font-size: 14px;
        }

        .score-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .streak-counter {
            color: #FF8C00;
            font-weight: bold;
            margin-top: 5px;
        }

        .name-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .name-modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .name-modal input {
            width: 100%;
            padding: 10px;
            margin: 20px 0;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .name-modal button {
            padding: 10px 20px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .name-modal button:hover {
            background: #45a049;
        }

        .score-details-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .score-details-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .close-button {
            padding: 10px 20px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }

        .close-button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Name Modal -->
        <div id="nameModal" class="name-modal">
            <div class="name-modal-content">
                <h2>Welcome to the Quiz!</h2>
                <p>Please enter your name to begin:</p>
                <input type="text" id="learnerName" placeholder="Your name">
                <button onclick="startQuiz()">Start</button>
            </div>
        </div>

        <!-- Score Details Modal -->
        <div id="scoreDetailsModal" class="score-details-modal" style="display: none;">
            <div class="score-details-content">
                <h2>Score Details</h2>
                <div id="scoreDetails">
                    <p><strong>Learner:</strong> <span id="modalLearnerName"></span></p>
                    <p><strong>Video:</strong> <span id="modalVideoTitle">Loading...</span></p>
                    <p><strong>Current Score:</strong> <span id="modalScore"></span></p>
                    <p><strong>Current Streak:</strong> <span id="modalStreak"></span></p>
                </div>
                <button class="close-button" onclick="closeScoreModal()">Close</button>
            </div>
        </div>

        <!-- Score Display -->
        <div class="score-display" onclick="showScoreDetails()">
            <div id="scoreText">Score: 0/0 points</div>
            <div id="streakText" class="streak-counter"></div>
        </div>

        <div class="video-container">
            <div id="youtube-player"></div>
        </div>
        <div class="controls">
            <button id="toggleButton">▶</button>
        </div>
        <div id="quizContainer" class="quiz-container">
            <h3 id="question"></h3>
            <div id="options"></div>
        </div>
        <div class="timer">
            Current time: <span id="currentTime">0</span> seconds
        </div>
    </div>

    <script>
        // ==============================
        // CONFIGURATION SECTION
        // ==============================
        
        // Change this to your desired YouTube video ID
        // From https://www.youtube.com/watch?v=3uSi3OzVB6M
        const VIDEO_ID = '3uSi3OzVB6M'; 
        
        // Question banks - each timestamp pulls randomly from its bank
        const QUESTION_BANKS = {
            53: [ // Questions for 53 seconds into video
                {
                    question: "Alex wants to know the release year of the movie Inception. He quickly types "Inception release year" into a search engine and notes the answer. Question: Which information-seeking behavior is Alex demonstrating?",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Great choice, {learner name}! This appears to be science-focused.",
                        "Not quite, {learner name}. This seems more science-oriented.",
                        "Close, {learner name}, but this looks more like a science topic.",
                        "Good guess, {learner name}, but this appears to be about science."
                    ],
                    correctAnswer: 1
                },
                {
                    question: "Carlos needs to find out the capital of Australia for a quiz. He quickly searches "capital of Australia" online and finds the answer. Question: Which information-seeking behavior is Carlos demonstrating?",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Excellent, {learner name}! This has documentary characteristics.",
                        "Good observation, {learner name}! This does seem like a lecture format.",
                        "Nice thinking, {learner name}! This could be considered tutorial content.",
                        "Interesting perspective, {learner name}! Interview style is possible."
                    ],
                    correctAnswer: 1
                },
                {
                    question: Jake is watching a basketball game and wants to know how many points LeBron James scored in the 2020 NBA Finals. He quickly types "LeBron James 2020 NBA Finals points" into a search engine and notes the answer. Question: Which information-seeking behavior is Jake demonstrating?,
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Good eye, {learner name}! Animation is used in this presentation.",
                        "Correct, {learner name}! There are live action elements visible.",
                        "Excellent observation, {learner name}! This uses mixed media approaches.",
                        "Interesting, {learner name}, but there seems to be more visual content than just text."
                    ],
                    correctAnswer: 1
                },
                {
                    question: "Ava is completing a reading for class and comes across the word “prophylaxis.” She doesn’t know what this word means and types it into a search engine to learn its definition. Question: Which information-seeking behavior is Ava demonstrating?",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Good estimate, {learner name}! Short videos are great for focused learning.",
                        "Nice guess, {learner name}! Medium-length videos allow for good depth.",
                        "Thoughtful, {learner name}! Longer videos can cover topics thoroughly.",
                        "Interesting perspective, {learner name}! Extended videos allow for comprehensive coverage."
                    ],
                    correctAnswer: 1
                },

            ],
            
            80: [ // Questions for 80 seconds into video
                {
                    question: "Situation: Maria is interested in learning about renewable energy but hasn't chosen a specific topic. She spends time reading various articles and watching videos on different renewable energy sources.

Question: Which information-seeking behavior is Maria demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Excellent, {learner name}! Diagrams are great for explaining concepts.",
                        "Good eye, {learner name}! Real footage adds authenticity to content.",
                        "Nice observation, {learner name}! Text overlays help clarify information.",
                        "Great spotting, {learner name}! Graphics enhance visual learning."
                    ],
                    correctAnswer: 2
                },
                {
                    question: "Emily wants to learn more about astronomy but doesn't have a specific focus. She looks through books and reads articles on the subject to explore its different facets.

Question: Which information-seeking behavior is Emily demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Interesting, {learner name}! Fast pacing can be energizing.",
                        "Good assessment, {learner name}! Moderate pacing works well for learning.",
                        "Thoughtful, {learner name}! Detailed pacing helps with understanding.",
                        "Observant, {learner name}! Variable pacing keeps things interesting."
                    ],
                    correctAnswer: 2
                },
                {
                    question: "Sophia is curious about different cooking techniques. She flips through various cookbooks and watches cooking shows without a specific dish in mind.

Question: Which information-seeking behavior is Sophia demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Excellent, {learner name}! Factual data forms the foundation of learning.",
                        "Interesting perspective, {learner name}! Opinions can provide different viewpoints.",
                        "Good thinking, {learner name}! Instructions help with practical application.",
                        "Creative thinking, {learner name}! Stories make content memorable."
                    ],
                    correctAnswer: 2
                },
                {
                    question: "Emma is interested in learning about different art movements but hasn't chosen a specific focus. She spends time exploring various art history books and online galleries to see what captures her interest.

Question: Which information-seeking behavior is Emma demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Good assessment, {learner name}! General audience content is broadly accessible.",
                        "Excellent observation, {learner name}! Student-focused content has specific characteristics.",
                        "Thoughtful analysis, {learner name}! Professional content tends to be more specialized.",
                        "Interesting perspective, {learner name}! Child-focused content has unique presentation styles."
                    ],
                    correctAnswer: 2
                },
                {
                    question: "Nina is interested in World War I but doesn't have a specific focus in mind. She reads an encyclopedia entry on the war and looks through books and articles on the topic to discover what aspects of the war stand out to her.

Question: Which information-seeking behavior is Nina demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Great, {learner name}! Clear presentation helps with comprehension.",
                        "Good observation, {learner name}! Somewhat clear content often improves as it progresses.",
                        "Honest assessment, {learner name}! Sometimes complex topics start confusingly.",
                        "Insightful, {learner name}! Building complexity is a good teaching strategy."
                    ],
                    correctAnswer: 2
                }
            ],
            
            103: [ // Questions for 103 seconds into video
                {
                    question: "Situation: Jamal reads an article claiming that a specific diet cures diabetes. Skeptical, he searches for scientific studies and expert opinions to verify this claim.

Question: Which information-seeking behavior is Jamal demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Excellent, {learner name}! Basic principles provide a strong foundation.",
                        "Interesting, {learner name}! Advanced theories can be challenging but rewarding.",
                        "Great thinking, {learner name}! Practical applications make learning relevant.",
                        "Good observation, {learner name}! Historical context adds depth to understanding."
                    ],
                    correctAnswer: 3
                },
                {
                    question: "Situation: Tom hears a statistic on a podcast stating that 70% of adults read books regularly. He wants to confirm this, so he looks up recent surveys and studies on adult reading habits.

Question: Which information-seeking behavior is Tom demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Good point, {learner name}! Repetition helps with retention.",
                        "Excellent, {learner name}! Examples make abstract concepts concrete.",
                        "Great observation, {learner name}! Visual aids enhance understanding.",
                        "Perfect, {learner name}! Multiple reinforcement methods work best together."
                    ],
                    correctAnswer: 3
                },
                {
                    question: "Situation: Ben reads a news article stating that a new law has been passed in his state. To confirm, he visits the official state government website and looks for official announcements.

Question: Which information-seeking behavior is Ben demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Good timing, {learner name}! Introductions set up the learning journey.",
                        "Excellent, {learner name}! Main concepts are the heart of educational content.",
                        "Great attention, {learner name}! Details provide important depth.",
                        "Thoughtful, {learner name}! Summaries help consolidate learning."
                    ],
                    correctAnswer: 3
                },
                {
                    question: "Situation: Liam hears that a specific vitamin can boost memory. To verify this claim, he searches for scientific studies and expert opinions to confirm its accuracy.

Question: Which information-seeking behavior is Liam demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Wonderful, {learner name}! Engaging content makes learning enjoyable.",
                        "Good assessment, {learner name}! Moderate engagement is still effective.",
                        "Honest evaluation, {learner name}! Sometimes important content can seem dry.",
                        "Optimistic view, {learner name}! Content often gets more engaging as it develops."
                    ],
                    correctAnswer: 3
                },
                {
                    question: "Ethan reads a social media post claiming that a certain economic policy typically lowers the unemployment rate. Skeptical, he reads articles written by expert economists to learn whether this claim is true or false.

Question: Which information-seeking behavior is Ethan demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Great insight, {learner name}! Visual learners benefit from diagrams and graphics.",
                        "Good observation, {learner name}! Auditory learners benefit from narration and sound.",
                        "Interesting perspective, {learner name}! Some content can engage hands-on learners.",
                        "Excellent, {learner name}! The best educational content supports multiple learning styles."
                    ],
                    correctAnswer: 3
                }
            ],

            175: [ // Questions for 175 seconds into video
                {
                    question: "Situation: Lena is writing a paper on the effects of climate change on agriculture. She formulates a research question, identifies keywords, searches academic databases, and reviews multiple scholarly articles to weigh the evidence and answer her research question.

Question: Which information-seeking behavior is Lena demonstrating?
",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Excellent, {learner name}! Basic principles provide a strong foundation.",
                        "Interesting, {learner name}! Advanced theories can be challenging but rewarding.",
                        "Great thinking, {learner name}! Practical applications make learning relevant.",
                        "Good observation, {learner name}! Historical context adds depth to understanding."
                    ],
                    correctAnswer: 4
                },
                {
                    question: "Sophie is writing a paper on strategies small businesses use to respond to inflation. She develops a research plan, identifies key terms, and systematically reviews academic journals, books, and credible online sources.

Question: Which information-seeking behavior is Sophie demonstrating?

",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Good point, {learner name}! Repetition helps with retention.",
                        "Excellent, {learner name}! Examples make abstract concepts concrete.",
                        "Great observation, {learner name}! Visual aids enhance understanding.",
                        "Perfect, {learner name}! Multiple reinforcement methods work best together."
                    ],
                    correctAnswer: 4
                },
                {
                    question: "Olivia is writing a paper on the impact of tourism on the economies of developing countries. She formulates a research question, identifies keywords, searches academic databases, and reviews multiple scholarly articles to weigh the evidence and answer her research question.

Question: Which information-seeking behavior is Olivia demonstrating?

",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Good timing, {learner name}! Introductions set up the learning journey.",
                        "Excellent, {learner name}! Main concepts are the heart of educational content.",
                        "Great attention, {learner name}! Details provide important depth.",
                        "Thoughtful, {learner name}! Summaries help consolidate learning."
                    ],
                    correctAnswer: 4
                },
                {
                    question: "Maya is enrolled in a sociology course and is tasked with exploring the impact of social media on adolescent self-esteem. She formulates a specific research question: "How does daily usage of Instagram influence the self-esteem levels of teenagers aged 13-18?" Maya develops a research plan that includes identifying relevant keywords, searching academic databases for peer-reviewed articles, analyzing various studies, and comparing different scholarly perspectives. She synthesizes the information gathered to answer her research question and presents her findings in a comprehensive research paper

Question: Which information-seeking behavior is Maya demonstrating?

",
                    options: ["Simple Search", "Browsing", "Fact-Checking", "Conducting Research"],
                    feedback: [
                        "Wonderful, {learner name}! Engaging content makes learning enjoyable.",
                        "Good assessment, {learner name}! Moderate engagement is still effective.",
                        "Honest evaluation, {learner name}! Sometimes important content can seem dry.",
                        "Optimistic view, {learner name}! Content often gets more engaging as it develops."
                    ],
                    correctAnswer: 4
                }
            ]

         207: [ // Questions for 207 seconds into video
                {
                    question: "Which of the following best describes how research differs from other types of information-seeking behaviors?
",
                    options: ["Research is only about verifying facts.", "Research is quick and usually involves finding a single piece of information.", "Research is exploring a complex question using a strategic approach and a range of diverse sources.", 
"Research focuses only on one scholar’s opinion on a topic."],
                    feedback: [
                        "Excellent, {learner name}! Basic principles provide a strong foundation.",
                        "Interesting, {learner name}! Advanced theories can be challenging but rewarding.",
                        "Great thinking, {learner name}! Practical applications make learning relevant.",
                        "Good observation, {learner name}! Historical context adds depth to understanding."
                    ],
                    correctAnswer: 0
                },
                {
                    question: "Which of the following are important traits of a good researcher?",
                    options: ["Curiosity about what’s out there on the topic", "Flexibility and creativity in trying different search strategies", "Persistence when research gets difficult", "All of the above"],
                    feedback: [
                        "Good point, {learner name}! Repetition helps with retention.",
                        "Excellent, {learner name}! Examples make abstract concepts concrete.",
                        "Great observation, {learner name}! Visual aids enhance understanding.",
                        "Perfect, {learner name}! Multiple reinforcement methods work best together."
                    ],
                    correctAnswer: 0
                },
                {
                    question: "What does it mean to think of research as a “conversation”?",
                    options: ["Research is best done through interviews with classmates.", "Scholars express different viewpoints and findings in their writing, contributing to a broader discussion on the topic.", 
"Research should avoid differing perspectives to stay focused.", "You should only use sources that agree with each other."],
                    feedback: [
                        "Good timing, {learner name}! Introductions set up the learning journey.",
                        "Excellent, {learner name}! Main concepts are the heart of educational content.",
                        "Great attention, {learner name}! Details provide important depth.",
                        "Thoughtful, {learner name}! Summaries help consolidate learning."
                    ],
                    correctAnswer: 0
                },
                {
                    question: "What role does flexibility play in the research process?",
                    options: ["Sticking rigidly to the first search plan until it works", "Changing search strategies and keywords when initial attempts don’t produce results", 
"Modifying your topic frequently to address as many components of a topic as possible", Only using one type of source to keep things simple"],
                    feedback: [
                        "Wonderful, {learner name}! Engaging content makes learning enjoyable.",
                        "Good assessment, {learner name}! Moderate engagement is still effective.",
                        "Honest evaluation, {learner name}! Sometimes important content can seem dry.",
                        "Optimistic view, {learner name}! Content often gets more engaging as it develops."
                    ],
                    correctAnswer: 0
                }
  {
                    question: "Why is it important to include a diversity of sources in research?
",
                    options: ["To make the bibliography look longer", "To understand the full scope of the debate and the different arguments scholars make", "To avoid reading contradictory viewpoints", "To use only the most popular sources"],
                    feedback: [
                        "Wonderful, {learner name}! Engaging content makes learning enjoyable.",
                        "Good assessment, {learner name}! Moderate engagement is still effective.",
                        "Honest evaluation, {learner name}! Sometimes important content can seem dry.",
                        "Optimistic view, {learner name}! Content often gets more engaging as it develops."
                    ],
                    correctAnswer: 0
                }
  {
                    question: "When conducting research, which of the following actions help develop a strong research mindset?",
                    options: ["Ignoring new ideas once the topic is chosen", "Exploring multiple perspectives and sources", "Accepting the first sources you find as the final answer", "Asking for help when stuck"],
                    feedback: [
                        "Wonderful, {learner name}! Engaging content makes learning enjoyable.",
                        "Good assessment, {learner name}! Moderate engagement is still effective.",
                        "Honest evaluation, {learner name}! Sometimes important content can seem dry.",
                        "Optimistic view, {learner name}! Content often gets more engaging as it develops."
                    ],
                    correctAnswer: 0
                }
            ]

  227: [ // Questions for 227 seconds into video

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: I enjoy exploring topics that I don’t know much about.
",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: When I learn something interesting, I want to dig deeper and find out more.
",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: I often wonder how or why something works or happens.
",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: I feel confident asking questions when I don’t fully understand a topic.
",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },
]

  232: [ // Questions for 232 seconds into video

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: If I can’t find the information I need right away, I keep trying different strategies.

",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: I don’t give up easily when research gets difficult or frustrating.

",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: I know that encountering challenges during research is normal.

",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: I’ve worked through roadblocks when researching for past assignments.

",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },
]


  246: [ // Questions for 246 seconds into video

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: I usually plan out how I will start a research assignment before jumping in.


",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: I think about keywords and search terms before using databases or search engines.


",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: I can adjust my research strategy when something isn’t working.


",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },

  {
                    type: "likert",
                    question: "Respond to the following likert scale question (1 = Strongly Disagree; 5 = Strongly Agree) to reflect on the following: I consider the different perspectives or debates around a topic when researching.


",
                    scale: {
                        min: 1,
                        max: 5,
                        labels: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
                        endpoints: ["Strongly Disagree", "Strongly Agree"]
                    },
                    feedback: {
                        1: "Thank you for that feedback, {learner name}. Organization is crucial for learning.",
                        2: "I appreciate your honesty, {learner name}. Clear organization is important.",
                        3: "That's fair, {learner name}. Neutral feedback helps us understand different perspectives.",
                        4: "Great to hear, {learner name}! Good organization enhances learning.",
                        5: "Wonderful, {learner name}! Clear organization makes all the difference."
                    }
                },
]
        };

        // This will be populated with randomly selected questions
        let QUIZ_POINTS = [];

        // ==============================
        // END CONFIGURATION SECTION
        // ==============================

        // Function to randomly select questions from banks
        function initializeQuizPoints() {
            QUIZ_POINTS = [];
            
            // For each timestamp, randomly select one question from its bank
            Object.keys(QUESTION_BANKS).forEach(timestamp => {
                const bank = QUESTION_BANKS[timestamp];
                const randomIndex = Math.floor(Math.random() * bank.length);
                const selectedQuestion = { ...bank[randomIndex] }; // Create a copy
                selectedQuestion.timeStamp = parseInt(timestamp);
                QUIZ_POINTS.push(selectedQuestion);
            });
            
            // Sort by timestamp to ensure proper order
            QUIZ_POINTS.sort((a, b) => a.timeStamp - b.timeStamp);
            
            // Update total questions count
            totalQuestions = QUIZ_POINTS.length;
            
            console.log('Random questions selected:', QUIZ_POINTS);
        }

        // Global variables
        let player;
        let currentQuiz = null;
        let completedQuizzes = new Set();
        let nextQuizPoint = null;
        let learnerName = '';
        let currentScore = 0;
        let totalQuestions = QUIZ_POINTS.length;
        let currentStreak = 0;
        let attemptsForCurrentQuestion = 0;
        let videoTitle = '';

        // Score modal functions
        function showScoreDetails() {
            const modal = document.getElementById('scoreDetailsModal');
            document.getElementById('modalLearnerName').textContent = learnerName;
            document.getElementById('modalScore').textContent = `${currentScore}/${totalQuestions} points`;
            document.getElementById('modalStreak').textContent = currentStreak > 1 ? `${currentStreak} correct in a row! 🔥` : 'No current streak';
            
            // Get video title if we haven't already
            if (!videoTitle && player && player.getVideoData) {
                videoTitle = player.getVideoData().title;
            }
            document.getElementById('modalVideoTitle').textContent = videoTitle || 'Interactive Quiz Video';
            
            modal.style.display = 'flex';
        }

        function closeScoreModal() {
            document.getElementById('scoreDetailsModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('scoreDetailsModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        };

        // Initialize functions
        function startQuiz() {
            const nameInput = document.getElementById('learnerName');
            learnerName = nameInput.value.trim();
            
            if (learnerName) {
                // Initialize random questions when quiz starts
                initializeQuizPoints();
                
                document.getElementById('nameModal').style.display = 'none';
                updateScoreDisplay();
                loadYouTubeAPI();
            } else {
                alert('Please enter your name to begin!');
            }
        }

        function updateScoreDisplay() {
            // Update the score display in the corner
            const scoreText = document.getElementById('scoreText');
            const streakText = document.getElementById('streakText');
            
            scoreText.textContent = `${learnerName}'s score: ${currentScore}/${totalQuestions} points`;
            
            if (currentStreak > 1) {
                streakText.textContent = `${currentStreak} correct in a row! 🔥`;
            } else {
                streakText.textContent = '';
            }

            // Update the modal if it's visible
            const modal = document.getElementById('scoreDetailsModal');
            if (modal.style.display === 'flex') {
                document.getElementById('modalLearnerName').textContent = learnerName;
                document.getElementById('modalScore').textContent = `${currentScore}/${totalQuestions} points`;
                document.getElementById('modalStreak').textContent = currentStreak > 1 
                    ? `${currentStreak} correct in a row! 🔥` 
                    : 'No current streak';
                
                // Update video title if we have it
                if (!videoTitle && player && player.getVideoData) {
                    videoTitle = player.getVideoData().title;
                    document.getElementById('modalVideoTitle').textContent = videoTitle || 'Interactive Quiz Video';
                }
            }
        }

        function replaceNameInFeedback(feedback) {
            return feedback.replace('{learner name}', learnerName);
        }

        // Load YouTube IFrame API
        function loadYouTubeAPI() {
            const tag = document.createElement('script');
            tag.src = 'https://www.youtube.com/iframe_api';
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }

        // Initialize YouTube player when API is ready
        window.onYouTubeIframeAPIReady = function() {
            console.log("YouTube API is ready");
            player = new YT.Player('youtube-player', {
                height: '360',
                width: '640',
                videoId: VIDEO_ID,
                events: {
                    'onStateChange': onPlayerStateChange,
                    'onReady': onPlayerReady
                },
                playerVars: {
                    'controls': 0,
                    'disablekb': 1
                }
            });
        };

        // When player is ready
        function onPlayerReady(event) {
            setInterval(() => {
                if (player && player.getPlayerState() === YT.PlayerState.PLAYING) {
                    document.getElementById('currentTime').textContent = 
                        Math.floor(player.getCurrentTime());
                }
            }, 1000);
        }

        // Handle player state changes
        function onPlayerStateChange(event) {
            const toggleButton = document.getElementById('toggleButton');
            
            if (event.data === YT.PlayerState.PLAYING) {
                toggleButton.textContent = '⏸';
                updateNextQuizPoint();
                startQuizCheck();
            } else {
                toggleButton.textContent = '▶';
            }
        }

        // Find next quiz point
        function updateNextQuizPoint() {
            if (!player || !player.getCurrentTime) return;
            const currentTime = player.getCurrentTime();
            nextQuizPoint = QUIZ_POINTS
                .filter(point => !completedQuizzes.has(point.timeStamp))
                .find(point => point.timeStamp > currentTime);
        }

        // Check for quiz point
        function startQuizCheck() {
            if (!nextQuizPoint || currentQuiz) return;
            
            const checkQuiz = () => {
                if (!player || player.getPlayerState() !== YT.PlayerState.PLAYING) return;
                
                const currentTime = player.getCurrentTime();
                if (currentTime >= nextQuizPoint.timeStamp) {
                    player.pauseVideo();
                    attemptsForCurrentQuestion = 1;  // Reset attempts counter for new question
                    showQuiz(nextQuizPoint);
                } else if (currentTime < nextQuizPoint.timeStamp) {
                    requestAnimationFrame(checkQuiz);
                }
            };
            
            requestAnimationFrame(checkQuiz);
        }

        // Display quiz
        function showQuiz(quiz) {
            currentQuiz = quiz;
            const quizContainer = document.getElementById('quizContainer');
            const questionEl = document.getElementById('question');
            const optionsEl = document.getElementById('options');
            
            questionEl.textContent = quiz.question;
            optionsEl.innerHTML = '';
            
            // Check if this is a Likert scale question
            if (quiz.type === 'likert') {
                showLikertScale(quiz, optionsEl);
            } else {
                // Regular multiple choice question
                quiz.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.className = 'option';
                    button.textContent = option;
                    button.onclick = () => handleAnswer(index);
                    optionsEl.appendChild(button);
                });
            }
            
            quizContainer.classList.add('active');
        }

        // Display Likert scale
        function showLikertScale(quiz, container) {
            const likertContainer = document.createElement('div');
            likertContainer.className = 'likert-container';
            
            const scaleContainer = document.createElement('div');
            scaleContainer.className = 'likert-scale';
            
            // Create radio buttons and labels
            for (let i = quiz.scale.min; i <= quiz.scale.max; i++) {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'likert-option';
                
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = 'likert-response';
                radio.value = i;
                radio.className = 'likert-radio';
                radio.id = `likert-${i}`;
                
                const label = document.createElement('label');
                label.htmlFor = `likert-${i}`;
                label.className = 'likert-label';
                label.textContent = quiz.scale.labels[i - quiz.scale.min] || i.toString();
                
                // Add click handler to the entire option div
                optionDiv.onclick = () => {
                    // Remove selection from all options
                    document.querySelectorAll('.likert-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selection to clicked option
                    optionDiv.classList.add('selected');
                    radio.checked = true;
                    
                    // Enable submit button
                    document.getElementById('likert-submit').disabled = false;
                };
                
                optionDiv.appendChild(radio);
                optionDiv.appendChild(label);
                scaleContainer.appendChild(optionDiv);
            }
            
            likertContainer.appendChild(scaleContainer);
            
            // Add endpoint labels if provided
            if (quiz.scale.endpoints && quiz.scale.endpoints.length >= 2) {
                const endpoints = document.createElement('div');
                endpoints.className = 'likert-endpoints';
                endpoints.innerHTML = `<span>${quiz.scale.endpoints[0]}</span><span>${quiz.scale.endpoints[1]}</span>`;
                likertContainer.appendChild(endpoints);
            }
            
            // Add submit button
            const submitButton = document.createElement('button');
            submitButton.id = 'likert-submit';
            submitButton.className = 'likert-submit';
            submitButton.textContent = 'Submit Response';
            submitButton.disabled = true;
            submitButton.onclick = () => handleLikertAnswer();
            
            likertContainer.appendChild(submitButton);
            container.appendChild(likertContainer);
        }

        // Handle Likert scale answer
        function handleLikertAnswer() {
            const selectedRadio = document.querySelector('input[name="likert-response"]:checked');
            if (selectedRadio) {
                const selectedValue = parseInt(selectedRadio.value);
                
                // For Likert scales, we consider any response as "correct" 
                // since they're subjective opinions/ratings
                completedQuizzes.add(currentQuiz.timeStamp);
                currentScore += 1; // Give full points for participation
                currentStreak += 1; // Maintain streak for engagement
                
                updateScoreDisplay();
                
                // Show feedback
                const feedbackMsg = document.createElement('p');
                const feedback = currentQuiz.feedback[selectedValue] || 
                    `Thank you for your response, ${learnerName}!`;
                feedbackMsg.textContent = replaceNameInFeedback(feedback);
                feedbackMsg.style.color = '#008000';
                feedbackMsg.style.marginTop = '15px';
                feedbackMsg.style.textAlign = 'center';
                feedbackMsg.style.fontWeight = 'bold';
                
                // Disable all options
                document.querySelectorAll('.likert-option').forEach(opt => {
                    opt.style.pointerEvents = 'none';
                    opt.style.opacity = '0.7';
                });
                document.getElementById('likert-submit').style.display = 'none';
                
                const container = document.getElementById('options');
                container.appendChild(feedbackMsg);
                
                setTimeout(() => {
                    document.getElementById('quizContainer').classList.remove('active');
                    currentQuiz = null;
                    attemptsForCurrentQuestion = 0;
                    player.playVideo();
                }, 3000); // Longer delay for Likert to read feedback
            }
        }

        // Handle answer selection
        function handleAnswer(selectedIndex) {
            const options = document.getElementsByClassName('option');
            const correct = selectedIndex === currentQuiz.correctAnswer;
            
            // Add the appropriate class for coloring
            options[selectedIndex].classList.add(correct ? 'correct' : 'incorrect');
            
            if (correct) {
                Array.from(options).forEach(option => {
                    option.disabled = true;
                });
                completedQuizzes.add(currentQuiz.timeStamp);
                
                // Update score based on attempts
                if (attemptsForCurrentQuestion === 1) {
                    currentScore += 1;
                    currentStreak += 1;
                } else if (attemptsForCurrentQuestion === 2) {
                    currentScore += 0.5;
                    currentStreak = 0;
                } else {
                    currentStreak = 0;
                }
                
                updateScoreDisplay();
                
                const feedbackMsg = document.createElement('p');
                feedbackMsg.textContent = replaceNameInFeedback(currentQuiz.feedback[selectedIndex]);
                feedbackMsg.style.color = '#008000';
                feedbackMsg.style.marginTop = '10px';
                feedbackMsg.style.textAlign = 'center';
                feedbackMsg.style.fontWeight = 'bold';
                
                const existingMsg = options[selectedIndex].parentNode.querySelector('p');
                if (existingMsg) {
                    existingMsg.remove();
                }
                options[selectedIndex].parentNode.appendChild(feedbackMsg);
                
                setTimeout(() => {
                    document.getElementById('quizContainer').classList.remove('active');
                    currentQuiz = null;
                    attemptsForCurrentQuestion = 0;
                    player.playVideo();
                }, 2000);
            } else {
                attemptsForCurrentQuestion++;
                currentStreak = 0;
                updateScoreDisplay();
                
                const feedbackMsg = document.createElement('p');
                feedbackMsg.textContent = replaceNameInFeedback(currentQuiz.feedback[selectedIndex]);
                feedbackMsg.style.color = '#FF0000';
                feedbackMsg.style.marginTop = '10px';
                feedbackMsg.style.textAlign = 'center';
                
                const existingMsg = options[selectedIndex].parentNode.querySelector('p');
                if (existingMsg) {
                    existingMsg.remove();
                }
                options[selectedIndex].parentNode.appendChild(feedbackMsg);
            }
        }

        // Initialize toggle button
        document.getElementById('toggleButton').onclick = () => {
            if (!player) return;
            
            const playerState = player.getPlayerState();
            if (playerState === YT.PlayerState.PLAYING) {
                player.pauseVideo();
                toggleButton.textContent = '▶';
            } else if (!currentQuiz) {
                player.playVideo();
                toggleButton.textContent = '⏸';
            }
        };

        // Handle enter key in name input
        document.getElementById('learnerName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startQuiz();
            }
        });
    </script>
</body>
</html>
